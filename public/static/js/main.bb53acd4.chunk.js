(this["webpackJsonpcovidmap-frontend"]=this["webpackJsonpcovidmap-frontend"]||[]).push([[0],{26:function(e,t,a){e.exports=a(40)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),c=a.n(l),s=(a(31),a(32),a(4)),o=a(5),i=a(7),u=a(6),m=a(8),d=a(12),p=a(11),E=(a(33),a(25)),h=a(22),v=a.n(h),f=a(2),y=a.n(f),g=function(){return r.a.createElement("div",{style:{minHeight:"80vh",display:"grid"}},r.a.createElement("div",{style:{alignSelf:"center",justifySelf:"center"}},r.a.createElement("img",{src:"https://media.giphy.com/media/l4FGDT7FZkvojdKMw/giphy.gif",alt:"Loader",width:"300"}),r.a.createElement("h5",{style:{textAlign:"center"}},"LOADING...")))},b=function(){return r.a.createElement("div",{style:{minHeight:"80vh",display:"grid"}},r.a.createElement("div",{style:{alignSelf:"center",justifySelf:"center"}},r.a.createElement("img",{src:"https://media.giphy.com/media/8L0Pky6C83SzkzU55a/giphy.gif",alt:"Loader",width:"300"}),r.a.createElement("h5",{style:{textAlign:"center"}},"Error retrieving data :("),r.a.createElement("h5",{style:{textAlign:"center"}},"Please try again later!")))},N=r.a.createContext({}),C=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},loading:!0,error:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat("https://covid19-updates.herokuapp.com","/data")).then((function(e){return e.json()})).then((function(t){e.setState({data:t,loading:!1,error:!1})})).catch((function(t){console.log(t),e.setState({error:!0})}))}},{key:"render",value:function(){return this.state.error?r.a.createElement(b,null):this.state.loading?r.a.createElement(g,null):r.a.createElement(N.Provider,{value:this.state},this.props.children)}}]),t}(r.a.Component),x=N,D="Country/Region",k="Province/State",O="Confirmed",j="Deaths",P="Recovered",S="Latitude",w="Longitude",I="NewCases",T="Active",A="Country_Region",M="Province_State",L="Lat",R="Long_",F=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.context.data,t=v()(e.date,"MM-DD-YYYY").format("DD/MM/YYYY"),a=function(e){var t=0,a=0,n=0,r=0,l=0,c={};for(var s in e){var o=e[s],i=o[D]||o[A];c[i]||(c[i]=1),t+=parseInt(o[O]),a+=parseInt(o[j]),n+=parseInt(o[P]),r+=parseInt(o[I]),l+=parseInt(o[T])}return[t,a,n,r,l,Object.keys(c).length]}(e.covidData),n=Object(E.a)(a,6),l=n[0],c=n[1],s=n[2],o=n[3],i=n[4],u=n[5];return r.a.createElement("div",null,r.a.createElement("h2",null,"Overview"),r.a.createElement("p",{style:{fontSize:"110%"}},"Last updated on ",r.a.createElement("strong",null,t),". Data is typically refreshed daily at 0:00 GMT+0."),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-primary"},"TOTAL"),r.a.createElement("th",{className:"text-warning"},"NEW*"),r.a.createElement("th",{className:"text-danger"},"DEATHS"),r.a.createElement("th",{className:"text-success"},"RECOVERED"),r.a.createElement("th",{className:"text-info"},"ACTIVE"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"text-primary"},y()(l).format("0,0")),r.a.createElement("td",{className:"text-warning"},y()(o).format("0,0")),r.a.createElement("td",{className:"text-danger"},y()(c).format("0,0")),r.a.createElement("td",{className:"text-success"},y()(s).format("0,0")),r.a.createElement("td",{className:"text-info"},y()(i).format("0,0"))))),r.a.createElement("table",{className:"table table-striped table-mobile"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"col text-primary"},"TOTAL"),r.a.createElement("td",{className:"text-primary"},y()(l).format("0,0"))),r.a.createElement("tr",null,r.a.createElement("td",{className:"text-warning"},"NEW*"),r.a.createElement("td",{className:"text-warning"},y()(o).format("0,0"))),r.a.createElement("tr",null,r.a.createElement("td",{className:"text-danger"},"DEATHS"),r.a.createElement("td",{className:"text-danger"},y()(c).format("0,0"))),r.a.createElement("tr",null,r.a.createElement("td",{className:"text-success"},"RECOVERED"),r.a.createElement("td",{className:"text-success"},y()(s).format("0,0"))),r.a.createElement("tr",null,r.a.createElement("td",{className:"text-info"},"ACTIVE"),r.a.createElement("td",{className:"text-info"},y()(i).format("0,0"))))),r.a.createElement("p",null,"* Compared to previous day"),r.a.createElement("p",{style:{fontSize:"120%"}},"Affected countries:"," ",r.a.createElement("strong",{className:"text-info"},u)),r.a.createElement("p",null,"Source:"," ",r.a.createElement("a",{href:"https://github.com/CSSEGISandData/COVID-19/tree/master/csse_covid_19_data/csse_covid_19_daily_reports",target:"blank"},"JHU CSSE")))}}]),t}(r.a.Component);F.contextType=x;var _=F,V=function(e,t){var a=10*t,n=a-10;return e.slice(n,a)},G=function(e){function t(e,a){var n;return Object(s.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e,a))).sortData=function(e){var t=parseInt(e.target.value),a=n.state.data.slice();a.sort((function(e,a){return a[t]-e[t]})),n.setState({data:a,currentPage:1,dataDisplayed:V(a,1)})},n.state={data:[],dataDisplayed:[],currentPage:1,totalPages:1,currentCountry:n.props.country},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"updateData",value:function(){var e=function(e,t,a){var n=[],r={};if(t){for(var l in e.covidData){var c=e.covidData[l],s=c[D]||c[A];r[s]?(r[s][O]+=parseInt(c[O]),r[s][j]+=parseInt(c[j]),r[s][P]+=parseInt(c[P]),r[s][I]+=parseInt(c[I]),r[s][T]+=parseInt(c[T])):(r[s]={},r[s][O]=parseInt(c[O]),r[s][j]=parseInt(c[j]),r[s][P]=parseInt(c[P]),r[s][I]=parseInt(c[I]),r[s][T]=parseInt(c[T]))}for(var o in r){var i=r[o],u=i.Confirmed,m=i.Deaths,d=i.Recovered,p=i.NewCases,E=i.Active;n.push([o,u,p,m,d,E])}}else for(var h in e.covidData){var v=e.covidData[h];if((v[D]||v[A])===a){var f=v[k]||v[M],y=v[O],g=v[j],b=v[P],N=v[I],C=v[T];n.push([f,y,N,g,b,C])}}return n}(this.context.data,this.props.groupByCountry,this.props.country);e.sort((function(e,t){return t[1]-e[1]}));var t=Math.ceil(e.length/10);this.setState({data:e,totalPages:t,dataDisplayed:V(e,this.state.currentPage),currentCountry:this.props.country})}},{key:"componentDidMount",value:function(){0===this.state.data.length&&this.updateData()}},{key:"componentDidUpdate",value:function(){this.props.country!==this.state.currentCountry&&this.updateData()}},{key:"toPage",value:function(e){var t=e?this.state.currentPage-1:this.state.currentPage+1,a=V(this.state.data,t);this.setState({dataDisplayed:a,currentPage:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,this.state.currentCountry),r.a.createElement("h4",null,this.props.groupByCountry?"Countries/Regions":"States/Provinces"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-group mb-3 col-8 col-md-4 col-lg-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text",htmlFor:"inputGroupSelect01"},"Sort By")),r.a.createElement("select",{className:"custom-select",id:"inputGroupSelect01",onChange:this.sortData,defaultValue:"1"},r.a.createElement("option",{value:"",disabled:!0},"--Select One--"),r.a.createElement("option",{value:"1"},"Total Cases"),r.a.createElement("option",{value:"2"},"New Cases"),r.a.createElement("option",{value:"3"},"Deaths"),r.a.createElement("option",{value:"4"},"Recovered"),r.a.createElement("option",{value:"5"},"Active")))),r.a.createElement("table",{className:"table table-striped table-responsive-md"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,this.props.groupByCountry?"COUNTRY":"STATE"),r.a.createElement("th",{className:"text-primary"},"TOTAL"),r.a.createElement("th",{className:"text-warning"},"NEW"),r.a.createElement("th",{className:"text-danger"},"DEATHS"),r.a.createElement("th",{className:"text-success"},"RECOVERED"),r.a.createElement("th",{className:"text-info"},"ACTIVE"))),r.a.createElement("tbody",null,this.state.dataDisplayed.map((function(t,a){return r.a.createElement("tr",{key:t[0]},r.a.createElement("td",null,10*(e.state.currentPage-1)+a+1),r.a.createElement("td",null,t[0]),r.a.createElement("td",{className:"text-primary"},y()(t[1]).format("0,0")),r.a.createElement("td",{className:"text-warning"},y()(t[2]).format("0,0")),r.a.createElement("td",{className:"text-danger"},y()(t[3]).format("0,0")),r.a.createElement("td",{className:"text-success"},y()(t[4]).format("0,0")),r.a.createElement("td",{className:"text-info"},y()(t[5]).format("0,0")))})))),r.a.createElement("div",{className:"d-flex justify-content-center p-3"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:1===this.state.currentPage,onClick:function(){return e.toPage(!0)}},"Prev"),r.a.createElement("button",{type:"button",className:"btn btn-secondary ml-1",disabled:this.state.currentPage===this.state.totalPages,onClick:function(){return e.toPage(!1)}},"Next")))}}]),t}(r.a.Component);G.contextType=x;var Y=G,H=function(){return r.a.createElement("div",null,r.a.createElement(_,null),r.a.createElement(Y,{groupByCountry:!0}))},B=a(15),z=a.n(B),J=function(e,t,a){var n=e[a][S]||e[a][L],r=e[a][w]||e[a][R],l=parseFloat(n),c=parseFloat(r);isNaN(l)||isNaN(c)||t.flyTo({center:[c,l],zoom:6})},W=function(e,t,a){(function(e){var t={type:"FeatureCollection",features:[]};for(var a in e){var n=e[a][k]||e[a][M],r=e[a][D]||e[a][A],l=parseInt(e[a][O]),c=parseInt(e[a][I]),s=parseInt(e[a][j]),o=parseInt(e[a][P]),i=parseInt(e[a][T]),u=e[a][S]||e[a][L],m=e[a][w]||e[a][R],d=parseFloat(u),p=parseFloat(m);if(!isNaN(d)&&!isNaN(p)){var E=""!==n?n+" - "+r:r,h={type:"Feature"};h.geometry={type:"Point",coordinates:[p,d]},h.properties={title:E,totalCases:l,newCases:c,deaths:s,recovered:o,active:i,description:"\n                        <strong>".concat(E,"</strong><br/>\n                        Confirmed: ").concat(l,"<br/>\n                        New Cases: ").concat(c,"<br/>\n                        Deaths: ").concat(s,"<br/>\n                        Recovered: ").concat(o,"<br/>\n                        Active: ").concat(i,"\n                        ")},t.features.push(h)}}return t})(e).features.forEach((function(e){var n=document.createElement("div");n.className="marker",new a.Marker(n).setLngLat(e.geometry.coordinates).setPopup(new a.Popup({offset:25}).setHTML(e.properties.description)).addTo(t)}))};z.a.accessToken="pk.eyJ1IjoiZHp1b25nbGQiLCJhIjoiY2p5ZDM5OWJsMG5yYTNtczVuaW9oZGE5aSJ9.KyTQMpcmRFN8Fu_wB1lz1w";var U=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={country:"Australia",data:{}},a.map=null,a.onCountryChange=function(e){var t=e.target.value,n=a.state.data[t][D]||a.state.data[t][A];J(a.state.data,a.map,t),a.setState({country:n})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){0===Object.entries(this.state.data).length&&(this.setState({data:this.context.data.covidData}),this.map=new z.a.Map({container:this.mapContainer,style:"mapbox://styles/dzuongld/ck7stm0id1l9t1inuoudjp6oy"}),W(this.context.data.covidData,this.map,z.a))}},{key:"extractNames",value:function(e){var t=[];for(var a in e){var n=e[a][D]||e[a][A],r=e[a][k]||e[a][M]||"",l=""!==r?n+" - "+r:n;t.push([a,l])}return t.sort((function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0})),t}},{key:"render",value:function(){var e=this,t=this.extractNames(this.state.data);return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-group my-3  col-12 col-md-7"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text",htmlFor:"inputGroupSelect01"},"Location")),r.a.createElement("select",{className:"custom-select",id:"inputGroupSelect01",onChange:this.onCountryChange,defaultValue:""},r.a.createElement("option",{value:"",disabled:!0},"--Select One--"),t.map((function(e){return r.a.createElement("option",{key:e[0],value:e[0]},e[1])}))))),r.a.createElement("div",{ref:function(t){return e.mapContainer=t},className:"mapContainer"}),r.a.createElement(Y,{groupByCountry:!1,country:this.state.country}))}}]),t}(r.a.Component);U.contextType=x;var Z=U,K=function(){return r.a.createElement("nav",{className:"navbar sticky-top navbar-expand-lg navbar-dark bg-dark"},r.a.createElement(d.b,{className:"navbar-brand",to:"/"},"COVID-19 DATA"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarColor02","aria-controls":"navbarColor02","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarColor02"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{className:"nav-link",to:"/map"},"Map")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{className:"nav-link",to:"/news"},"News")))))},Q=function(e){return r.a.createElement("div",{className:"card my-2"},r.a.createElement("div",{className:"card-body"},r.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"card-link"},r.a.createElement("h5",{className:"card-title"},e.title)),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},e.date),r.a.createElement("p",{className:"card-text"},e.description)))},$=function(e,t){var a=4*t,n=a-4;return e.slice(n,a)},q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={data:[],dataDisplayed:[],currentPage:1,totalPages:1,loading:!0,error:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat("https://covid19-updates.herokuapp.com","/newsfeed")).then((function(e){return e.json()})).then((function(t){var a=Math.ceil(t.length/4);e.setState({data:t,totalPages:a,dataDisplayed:$(t,e.state.currentPage),loading:!1,error:!1})})).catch((function(t){console.log(t),e.setState({error:!0})}))}},{key:"toPage",value:function(e){var t=e?this.state.currentPage-1:this.state.currentPage+1,a=$(this.state.data,t);this.setState({dataDisplayed:a,currentPage:t})}},{key:"render",value:function(){var e=this;return this.state.error?r.a.createElement(b,null):this.state.loading?r.a.createElement(g,null):r.a.createElement("div",null,r.a.createElement("h2",null,"News Feed"),r.a.createElement("hr",{className:"my-2",style:{borderColor:"white"}}),r.a.createElement("h4",null,"Latest updates from the Australian Department of Health. Many of the articles are about the COVID-19 situation in Australia."),this.state.dataDisplayed.map((function(e){return r.a.createElement(Q,{key:e.description,title:e.title,description:e.description,date:e.pubDate[0].split(" ").slice(0,4).join(" "),link:e.guid[0]._})})),r.a.createElement("div",{className:"d-flex justify-content-center p-3"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:1===this.state.currentPage,onClick:function(){return e.toPage(!0)}},"Prev"),r.a.createElement("button",{type:"button",className:"btn btn-secondary ml-1",disabled:this.state.currentPage===this.state.totalPages,onClick:function(){return e.toPage(!1)}},"Next")))}}]),t}(r.a.Component),X=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(C,null,r.a.createElement(d.a,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,r.a.createElement(g,null))},r.a.createElement(K,null),r.a.createElement("div",{className:"container"},r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/",exact:!0},r.a.createElement(H,null)),r.a.createElement(p.b,{path:"/map"},r.a.createElement(Z,null)),r.a.createElement(p.b,{path:"/news"},r.a.createElement(q,null)),r.a.createElement(p.a,{to:"/"})))))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.bb53acd4.chunk.js.map