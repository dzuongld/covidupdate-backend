{"version":3,"sources":["utils/fields.js","components/List.js","visualization/mapbox.js","components/Map.js"],"names":["COUNTRY","STATE","LAST_UPDATE","CONFIRMED","DEATHS","RECOVERED","LATITUDE","LONGITUDE","NEW_CASES","getDataByPage","data","page","end","start","slice","List","props","context","sortData","event","index","parseInt","target","value","newData","state","sort","a","b","setState","currentPage","dataDisplayed","totalPages","currentCountry","country","groupByCountry","selectedCountry","list","dataDup","key","covidData","countryName","fields","Confirmed","Deaths","Recovered","NewCases","push","confirmed","deaths","recovered","newCases","transformData","this","newTotalPages","Math","ceil","length","updateData","goBack","className","htmlFor","id","onChange","defaultValue","disabled","map","entry","numeral","format","type","onClick","toPage","React","Component","contextType","DataContext","location","lat","parseFloat","lng","flyTo","center","zoom","mapboxgl","geojson","totalCases","title","record","geometry","coordinates","properties","description","features","convertToGeoJSON","forEach","marker","el","document","createElement","Marker","setLngLat","setPopup","Popup","offset","setHTML","addTo","accessToken","process","Map","onCountryChange","mapbox","Object","entries","container","mapContainer","style","displayedName","extractNames","ref"],"mappings":"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","file":"static/js/5.ca656f92.chunk.js","sourcesContent":["export default {\r\n    COUNTRY: 'Country/Region',\r\n    STATE: 'Province/State',\r\n    LAST_UPDATE: 'Last Update',\r\n    CONFIRMED: 'Confirmed',\r\n    DEATHS: 'Deaths',\r\n    RECOVERED: 'Recovered',\r\n    LATITUDE: 'Latitude',\r\n    LONGITUDE: 'Longitude',\r\n    NEW_CASES: 'NewCases'\r\n}\r\n","import React from 'react'\r\nimport numeral from 'numeral'\r\nimport fields from '../utils/fields'\r\nimport DataContext from '../contexts/DataContext'\r\n\r\nconst transformData = (data, groupByCountry, selectedCountry) => {\r\n    // console.log(data)\r\n    const list = []\r\n    const dataDup = {}\r\n\r\n    if (groupByCountry) {\r\n        for (const key in data.covidData) {\r\n            const country = data.covidData[key]\r\n            const countryName = country[fields.COUNTRY]\r\n            if (dataDup[countryName]) {\r\n                dataDup[countryName][fields.CONFIRMED] += parseInt(\r\n                    country[fields.CONFIRMED]\r\n                )\r\n                dataDup[countryName][fields.DEATHS] += parseInt(\r\n                    country[fields.DEATHS]\r\n                )\r\n                dataDup[countryName][fields.RECOVERED] += parseInt(\r\n                    country[fields.RECOVERED]\r\n                )\r\n                dataDup[countryName][fields.NEW_CASES] += parseInt(\r\n                    country[fields.NEW_CASES]\r\n                )\r\n            } else {\r\n                dataDup[countryName] = {}\r\n                dataDup[countryName][fields.CONFIRMED] = parseInt(\r\n                    country[fields.CONFIRMED]\r\n                )\r\n                dataDup[countryName][fields.DEATHS] = parseInt(\r\n                    country[fields.DEATHS]\r\n                )\r\n                dataDup[countryName][fields.RECOVERED] = parseInt(\r\n                    country[fields.RECOVERED]\r\n                )\r\n                dataDup[countryName][fields.NEW_CASES] = parseInt(\r\n                    country[fields.NEW_CASES]\r\n                )\r\n            }\r\n        }\r\n\r\n        for (const country in dataDup) {\r\n            const { Confirmed, Deaths, Recovered, NewCases } = dataDup[country]\r\n            list.push([country, Confirmed, NewCases, Deaths, Recovered])\r\n        }\r\n    } else {\r\n        for (const key in data.covidData) {\r\n            const country = data.covidData[key]\r\n            const countryName = country[fields.COUNTRY]\r\n            if (countryName === selectedCountry) {\r\n                const state = country[fields.STATE]\r\n                const confirmed = country[fields.CONFIRMED]\r\n                const deaths = country[fields.DEATHS]\r\n                const recovered = country[fields.RECOVERED]\r\n                const newCases = country[fields.NEW_CASES]\r\n                list.push([state, confirmed, newCases, deaths, recovered])\r\n            }\r\n        }\r\n    }\r\n\r\n    return list\r\n}\r\n\r\nconst getDataByPage = (data, page) => {\r\n    const end = page * 10\r\n    const start = end - 10\r\n    return data.slice(start, end)\r\n}\r\n\r\nclass List extends React.Component {\r\n    static contextType = DataContext\r\n\r\n    constructor(props, context) {\r\n        super(props, context)\r\n        this.state = {\r\n            data: [],\r\n            dataDisplayed: [],\r\n            currentPage: 1,\r\n            totalPages: 1,\r\n            currentCountry: this.props.country\r\n        }\r\n    }\r\n\r\n    updateData() {\r\n        const newData = transformData(\r\n            this.context.data,\r\n            this.props.groupByCountry,\r\n            this.props.country\r\n        )\r\n        const newTotalPages = Math.ceil(newData.length / 10)\r\n        this.setState({\r\n            data: newData,\r\n            totalPages: newTotalPages,\r\n            dataDisplayed: getDataByPage(newData, this.state.currentPage),\r\n            currentCountry: this.props.country\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.state.data.length === 0) this.updateData()\r\n    }\r\n\r\n    // refresh list only when country is changed\r\n    componentDidUpdate() {\r\n        if (this.props.country !== this.state.currentCountry) this.updateData()\r\n    }\r\n\r\n    // sort by descending order\r\n    sortData = (event) => {\r\n        const index = parseInt(event.target.value)\r\n        const newData = this.state.data.slice()\r\n        newData.sort((a, b) => {\r\n            return b[index] - a[index]\r\n        })\r\n        this.setState({\r\n            data: newData,\r\n            currentPage: 1,\r\n            dataDisplayed: getDataByPage(newData, 1)\r\n        })\r\n    }\r\n\r\n    toPage(goBack) {\r\n        const page = goBack\r\n            ? this.state.currentPage - 1\r\n            : this.state.currentPage + 1\r\n        const newData = getDataByPage(this.state.data, page)\r\n        this.setState({\r\n            dataDisplayed: newData,\r\n            currentPage: page\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h2>{this.state.currentCountry}</h2>\r\n\r\n                <h4>\r\n                    {this.props.groupByCountry\r\n                        ? 'Countries/Regions'\r\n                        : 'States/Provinces'}\r\n                </h4>\r\n\r\n                <div className=\"row\">\r\n                    <div className=\"input-group mb-3 col-8 col-md-4 col-lg-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                            <label\r\n                                className=\"input-group-text\"\r\n                                htmlFor=\"inputGroupSelect01\"\r\n                            >\r\n                                Sort By\r\n                            </label>\r\n                        </div>\r\n                        <select\r\n                            className=\"custom-select\"\r\n                            id=\"inputGroupSelect01\"\r\n                            onChange={this.sortData}\r\n                            defaultValue=\"\"\r\n                        >\r\n                            <option value=\"\" disabled>\r\n                                --Select One--\r\n                            </option>\r\n                            <option value=\"1\">Total Cases</option>\r\n                            <option value=\"2\">New Cases</option>\r\n                            <option value=\"3\">Deaths</option>\r\n                            <option value=\"4\">Recovered</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <table className=\"table table-striped\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>#</th>\r\n                            <th>\r\n                                {this.props.groupByCountry\r\n                                    ? 'COUNTRY'\r\n                                    : 'STATE'}\r\n                            </th>\r\n                            <th className=\"text-primary\">TOTAL</th>\r\n                            <th className=\"text-warning\">NEW</th>\r\n                            <th className=\"mobile text-danger\">DEATHS</th>\r\n                            <th className=\"mobile text-success\">RECOVERED</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {this.state.dataDisplayed.map((entry, index) => {\r\n                            return (\r\n                                <tr key={entry[0]}>\r\n                                    <td>\r\n                                        {(this.state.currentPage - 1) * 10 +\r\n                                            index +\r\n                                            1}\r\n                                    </td>\r\n                                    <td>{entry[0]}</td>\r\n                                    <td className=\"text-primary\">\r\n                                        {numeral(entry[1]).format('0,0')}\r\n                                    </td>\r\n                                    <td className=\"text-warning\">\r\n                                        {numeral(entry[2]).format('0,0')}\r\n                                    </td>\r\n                                    <td className=\"mobile text-danger\">\r\n                                        {numeral(entry[3]).format('0,0')}\r\n                                    </td>\r\n                                    <td className=\"mobile text-success\">\r\n                                        {numeral(entry[4]).format('0,0')}\r\n                                    </td>\r\n                                </tr>\r\n                            )\r\n                        })}\r\n                    </tbody>\r\n                </table>\r\n\r\n                <div className=\"d-flex justify-content-center p-3\">\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-secondary\"\r\n                        disabled={this.state.currentPage === 1}\r\n                        onClick={() => this.toPage(true)}\r\n                    >\r\n                        Prev\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"btn btn-secondary ml-1\"\r\n                        disabled={\r\n                            this.state.currentPage === this.state.totalPages\r\n                        }\r\n                        onClick={() => this.toPage(false)}\r\n                    >\r\n                        Next\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default List\r\n","import fields from '../utils/fields'\r\n\r\nconst convertToGeoJSON = (data) => {\r\n    const geojson = {}\r\n    geojson.type = 'FeatureCollection'\r\n    geojson.features = []\r\n\r\n    for (const location in data) {\r\n        const state = data[location][fields.STATE]\r\n        const country = data[location][fields.COUNTRY]\r\n        const totalCases = parseInt(data[location][fields.CONFIRMED])\r\n        const newCases = parseInt(data[location][fields.NEW_CASES])\r\n        const deaths = parseInt(data[location][fields.DEATHS])\r\n        const recovered = parseInt(data[location][fields.RECOVERED])\r\n        const lat = parseFloat(data[location][fields.LATITUDE])\r\n        const lng = parseFloat(data[location][fields.LONGITUDE])\r\n\r\n        const title = state !== '' ? state + ' - ' + country : country\r\n        const record = {}\r\n        record.type = 'Feature'\r\n        record.geometry = {\r\n            type: 'Point',\r\n            coordinates: [lng, lat]\r\n        }\r\n        record.properties = {\r\n            title,\r\n            totalCases,\r\n            newCases,\r\n            deaths,\r\n            recovered,\r\n            description: `\r\n                        <strong>${title}</strong><br/>\r\n                        Confirmed: ${totalCases}<br/>\r\n                        New Cases: ${newCases}<br/>\r\n                        Deaths: ${deaths}<br/>\r\n                        Recovered: ${recovered}\r\n                        `\r\n        }\r\n        geojson.features.push(record)\r\n    }\r\n\r\n    return geojson\r\n}\r\n\r\nexport const addMarkers = (data, map, mapboxgl) => {\r\n    const geojson = convertToGeoJSON(data)\r\n\r\n    geojson.features.forEach(function(marker) {\r\n        // create a HTML element for each feature\r\n        const el = document.createElement('div')\r\n        el.className = 'marker'\r\n\r\n        // make a marker for each feature and add to the map\r\n        new mapboxgl.Marker(el)\r\n            .setLngLat(marker.geometry.coordinates)\r\n            .setPopup(\r\n                new mapboxgl.Popup({ offset: 25 }) // add popups\r\n                    .setHTML(marker.properties.description)\r\n            )\r\n            .addTo(map)\r\n    })\r\n}\r\n\r\nconst flyToLocation = (data, map, location) => {\r\n    const lat = parseFloat(data[location][fields.LATITUDE])\r\n    const lng = parseFloat(data[location][fields.LONGITUDE])\r\n    map.flyTo({ center: [lng, lat], zoom: 6 })\r\n}\r\n\r\nexport default { flyToLocation, addMarkers }\r\n","import React from 'react'\r\nimport mapboxgl from 'mapbox-gl'\r\nimport List from './List'\r\n\r\nimport DataContext from '../contexts/DataContext'\r\nimport fields from '../utils/fields'\r\nimport mapbox from '../visualization/mapbox'\r\n\r\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_API\r\n\r\nclass Map extends React.Component {\r\n    static contextType = DataContext\r\n\r\n    state = { country: 'Australia', data: {} }\r\n    map = null\r\n\r\n    componentDidMount() {\r\n        if (Object.entries(this.state.data).length === 0) {\r\n            this.setState({\r\n                data: this.context.data.covidData\r\n            })\r\n        }\r\n        this.map = new mapboxgl.Map({\r\n            container: this.mapContainer,\r\n            style: 'mapbox://styles/dzuongld/ck7stm0id1l9t1inuoudjp6oy'\r\n        })\r\n        mapbox.addMarkers(this.context.data.covidData, this.map, mapboxgl)\r\n    }\r\n\r\n    /* \r\n        example element: ['ChinaHubei','China - Hubei']\r\n     */\r\n    extractNames(data) {\r\n        const list = []\r\n        for (const location in data) {\r\n            const country = data[location][fields.COUNTRY]\r\n            const state = data[location][fields.STATE]\r\n            const displayedName =\r\n                state !== '' ? country + ' - ' + state : country\r\n            list.push([location, displayedName])\r\n        }\r\n        list.sort((a, b) => {\r\n            if (a[0] > b[0]) return 1\r\n            else if (a[0] < b[0]) return -1\r\n            return 0\r\n        })\r\n        return list\r\n    }\r\n\r\n    onCountryChange = (event) => {\r\n        const location = event.target.value\r\n        const country = this.state.data[location][fields.COUNTRY]\r\n\r\n        // trigger 'fly' event on map\r\n        mapbox.flyToLocation(this.state.data, this.map, location)\r\n        // refresh list\r\n        this.setState({ country: country })\r\n    }\r\n\r\n    render() {\r\n        const list = this.extractNames(this.state.data)\r\n        return (\r\n            <div>\r\n                <div className=\"row\">\r\n                    <div className=\"input-group my-3  col-12 col-md-7\">\r\n                        <div className=\"input-group-prepend\">\r\n                            <label\r\n                                className=\"input-group-text\"\r\n                                htmlFor=\"inputGroupSelect01\"\r\n                            >\r\n                                Location\r\n                            </label>\r\n                        </div>\r\n                        <select\r\n                            className=\"custom-select\"\r\n                            id=\"inputGroupSelect01\"\r\n                            onChange={this.onCountryChange}\r\n                            defaultValue=\"\"\r\n                        >\r\n                            <option value=\"\" disabled>\r\n                                --Select One--\r\n                            </option>\r\n                            {list.map((record) => {\r\n                                return (\r\n                                    <option key={record[0]} value={record[0]}>\r\n                                        {record[1]}\r\n                                    </option>\r\n                                )\r\n                            })}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div\r\n                    ref={(el) => (this.mapContainer = el)}\r\n                    className=\"mapContainer\"\r\n                ></div>\r\n                <List groupByCountry={false} country={this.state.country} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Map\r\n"],"sourceRoot":""}